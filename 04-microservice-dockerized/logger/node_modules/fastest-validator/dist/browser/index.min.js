"use strict";function u(){function e(e){return"string"!=typeof e?this.makeError("string"):!!E.test(e)||this.makeError("url")}function t(e,t){if("string"!=typeof e)return this.makeError("string");var r=e.length;return!1===t.empty&&0===r?this.makeError("stringEmpty"):null!=t.min&&r<t.min?this.makeError("stringMin",t.min,r):null!=t.max&&r>t.max?this.makeError("stringMax",t.max,r):null!=t.length&&r!==t.length?this.makeError("stringLength",t.length,r):null==t.pattern||t.pattern.test(e)?null!=t.contains&&-1===e.indexOf(t.contains)?this.makeError("stringContains",t.contains):null==t.enum||-1!==t.enum.indexOf(e)||this.makeError("stringEnum",t.enum):this.makeError("stringPattern",t.pattern)}function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)||this.makeError("object")}function n(e,t){return!0===t.convert&&"number"!=typeof e&&(e=Number(e)),"number"!=typeof e||isNaN(e)||!isFinite(e)?this.makeError("number"):null!=t.min&&e<t.min?this.makeError("numberMin",t.min,e):null!=t.max&&e>t.max?this.makeError("numberMax",t.max,e):null!=t.equal&&e!==t.equal?this.makeError("numberEqual",t.equal,e):null!=t.notEqual&&e===t.notEqual?this.makeError("numberNotEqual",t.notEqual):!0===t.integer&&0!=e%1?this.makeError("numberInteger",e):!0===t.positive&&0>=e?this.makeError("numberPositive",e):!(!0===t.negative&&0<=e)||this.makeError("numberNegative",e)}function i(e){return"function"==typeof e||this.makeError("function")}function a(e){return null===e||void 0===e||this.makeError("forbidden")}function o(e,t){return"string"!=typeof e?this.makeError("string"):!!("precise"==t.mode?b:g).test(e)||this.makeError("email")}function l(e,t){return!0!==t.convert||e instanceof Date||(e=new Date(e)),e instanceof Date&&!isNaN(e.getTime())||this.makeError("date")}function u(e,t){return t.check.call(this,e,t)}function s(e,t){return!0===t.convert&&"boolean"!=typeof e&&(1===e||0===e||"true"===e||"false"===e||"1"===e||"0"===e||"on"===e||"off"===e)||("boolean"==typeof e||this.makeError("boolean"))}function f(e,t){if(!Array.isArray(e))return this.makeError("array");var r=e.length;if(!1===t.empty&&0===r)return this.makeError("arrayEmpty");if(null!=t.min&&r<t.min)return this.makeError("arrayMin",t.min,r);if(null!=t.max&&r>t.max)return this.makeError("arrayMax",t.max,r);if(null!=t.length&&r!==t.length)return this.makeError("arrayLength",t.length,r);if(null!=t.contains&&-1===e.indexOf(t.contains))return this.makeError("arrayContains",t.contains);if(null!=t.enum)for(r=0;r<e.length;r++)if(-1===t.enum.indexOf(e[r]))return this.makeError("arrayEnum",e[r],t.enum);return!0}function m(){return!0}function h(e,t){t=t||[];for(var r=0;r<e.length;++r)Array.isArray(e[r])?h(e[r],t):t.push(e[r]);return t}function c(e,t){for(var r in t)"object"==typeof t[r]&&null!==t[r]?(e[r]=e[r]||{},c(e[r],t[r])):e[r]=t[r];return e}function d(h){this.opts={messages:y},h&&p(this.opts,h),this.messages=this.opts.messages,this.rules={any:m,array:f,boolean:s,custom:u,date:l,email:o,forbidden:a,function:i,number:n,object:r,string:t,url:e}}var p=c,y={required:"The '{field}' field is required!",string:"The '{field}' field must be a string!",stringEmpty:"The '{field}' field must not be empty!",stringMin:"The '{field}' field length must be larger than or equal to {expected} characters long!",stringMax:"The '{field}' field length must be less than or equal to {expected} characters long!",stringLength:"The '{field}' field length must be {expected} characters long!",stringPattern:"The '{field}' field fails to match the required pattern!",stringContains:"The '{field}' field must contain the '{expected}' text!",stringEnum:"The '{field}' field does not match any of the allowed values!",number:"The '{field}' field must be a number!",numberMin:"The '{field}' field must be larger than or equal to {expected}!",numberMax:"The '{field}' field must be less than or equal to {expected}!",numberEqual:"The '{field}' field must be equal with {expected}!",numberNotEqual:"The '{field}' field can't be equal with {expected}!",numberInteger:"The '{field}' field must be an integer!",numberPositive:"The '{field}' field must be a positive number!",numberNegative:"The '{field}' field must be a negative number!",array:"The '{field}' field must be an array!",arrayEmpty:"The '{field}' field must not be an empty array!",arrayMin:"The '{field}' field must contain at least {expected} items!",arrayMax:"The '{field}' field must contain less than or equal to {expected} items!",arrayLength:"The '{field}' field must contain {expected} items!",arrayContains:"The '{field}' field must contain the '{expected}' item!",arrayEnum:"The '{field} field value '{expected}' does not match any of the allowed values!",boolean:"The '{field}' field must be a boolean!",function:"The '{field}' field must be a function!",date:"The '{field}' field must be a Date!",dateMin:"The '{field}' field must be larger than or equal to {expected}!",dateMax:"The '{field}' field must be less than or equal to {expected}!",forbidden:"The '{field}' field is forbidden!",email:"The '{field}' field must be a valid e-mail!"},b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,g=/^\S+@\S+\.\S+$/,E=/^https?:\/\/\S+/;return d.prototype.validate=function(e,t){return this.compile(t)(e)},d.prototype.compile=function(e){var t=this;if(Array.isArray(e)){if(0==e.length)throw Error("If the schema is an Array, must contain at least one element!");var r=h(e.map(function(e){return t._processRule(e,null,!1)}));return this._checkWrapper(r,!0)}if(null!=e&&"object"==typeof e)return r=h(Object.keys(e).map(function(r){return t._processRule(e[r],r,!1)})),this._checkWrapper(r);throw Error("Invalid schema!")},d.prototype._processRule=function(e,t,r){var n=[];if(Array.isArray(e))return n.push({fn:this.compile(e),type:"_multi",name:t,schema:e,iterate:r}),n;if("string"==typeof e&&(e={type:e}),!this.rules[e.type])throw Error("Invalid '"+e.type+"' type in validator schema!");return n.push({fn:this.rules[e.type],type:e.type,name:t,schema:e,iterate:r}),"object"===e.type&&e.props&&n.push({fn:this.compile(e.props),type:e.type,name:t,schema:e,iterate:r}),"array"===e.type&&e.items&&n.push({fn:this._checkWrapper(this._processRule(e.items,null,!1)),type:e.type,name:t,schema:e,iterate:!0}),n},d.prototype._checkWrapper=function(e,t){var r=this;return function(n,i,a){i=[];for(var o=e.length,l=0;l<o;l++){var u=e[l],s=u.schema;if(u.name)var f=n[u.name],m=(a?a+".":"")+u.name;else f=n,m=a||"";if(void 0!==f&&null!==f||"forbidden"===u.type)if(u.iterate)for(var h=f.length,c=0;c<h;c++){var d=m+"["+c+"]",p=u.fn.call(r,f[c],s,d);!0!==p&&r.handleResult(i,d,p)}else{if(u=u.fn.call(r,f,s,m),t&&!0===u)return!0;!0!==u&&r.handleResult(i,m,u)}else!0!==s.optional&&r.handleResult(i,m,r.makeError("required"))}return 0===i.length||i}},d.prototype.handleResult=function(e,t,r){var n=this;(Array.isArray(r)?r:[r]).forEach(function(r){r.field||(r.field=t),r.message||(r.message=n.resolveMessage(r)),e.push(r)})},d.prototype.makeError=function(e,t,r){return{type:e,expected:t,actual:r}},d.prototype.resolveMessage=function(e){var t=this.messages[e.type];if(null!=t){var r=null!=e.expected?e.expected:"",n=null!=e.actual?e.actual:"";return t.replace(/\{field\}/g,e.field).replace(/\{expected\}/g,r).replace(/\{actual\}/g,n)}},d.prototype.add=function(e,t){this.rules[e]=t},d}var e=e||{};e.scope={},e.ASSUME_ES5=!1,e.ASSUME_NO_NATIVE_MAP=!1,e.ASSUME_NO_NATIVE_SET=!1,e.defineProperty=e.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},e.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},e.global=e.getGlobal(this),e.SYMBOL_PREFIX="jscomp_symbol_",e.initSymbol=function(){e.initSymbol=function(){},e.global.Symbol||(e.global.Symbol=e.Symbol)},e.Symbol=function(){var t=0;return function(r){return e.SYMBOL_PREFIX+(r||"")+t++}}(),e.initSymbolIterator=function(){e.initSymbol();var t=e.global.Symbol.iterator;t||(t=e.global.Symbol.iterator=e.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&e.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return e.arrayIterator(this)}}),e.initSymbolIterator=function(){}},e.arrayIterator=function(t){var r=0;return e.iteratorPrototype(function(){return r<t.length?{done:!1,value:t[r++]}:{done:!0}})},e.iteratorPrototype=function(t){return e.initSymbolIterator(),t={next:t},t[e.global.Symbol.iterator]=function(){return this},t},e.iteratorFromArray=function(t,r){e.initSymbolIterator(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var e=n++;return{value:r(e,t[e]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},e.polyfill=function(t,r){if(r){var n=e.global;t=t.split(".");for(var i=0;i<t.length-1;i++){var a=t[i];a in n||(n[a]={}),n=n[a]}(r=r(i=n[t=t[t.length-1]]))!=i&&null!=r&&e.defineProperty(n,t,{configurable:!0,writable:!0,value:r})}},e.polyfill("Array.prototype.keys",function(t){return t||function(){return e.iteratorFromArray(this,function(e){return e})}},"es6","es3"),"object"==typeof exports&&"undefined"!=typeof module?module.exports=u():"function"==typeof define&&define.amd?define(u):this.FastestValidator=u();
